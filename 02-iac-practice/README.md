# AWSハンズオン：セキュアなWebサーバ環境構築 (CloudFormation)

## 概要

AWSの無料利用枠のみを利用して、セキュリティを考慮した基本的なWebサーバ環境を構築するためのCloudFormationテンプレートです。

AWS認定Cloud Practitioner取得後のスキルアップとして、インフラのプロビジョニング自動化（Infrastructure as Code）を実践するために作成しました。

## 構築されるアーキテクチャ

このテンプレート (`handson3-secure-template.yaml`) によって、以下のAWSリソースがプロビジョニングされます。

- **VPC:** `/16` のカスタムVPC
- **Subnet:** 1つのパブリックサブネット
- **Internet Gateway:** VPCとインターネットを接続
- **Route Table:** パブリックサブネットのトラフィックをInternet Gatewayへルーティング
- **EC2 Instance:** `t3.micro` (Amazon Linux 2023) のWebサーバ
- **Security Group:**
    - **インバウンド:** HTTP (ポート80) のみ許可
    - **アウトバウンド:** 全て許可
- **IAM Role:** EC2インスタンスがAWS Systems Manager (SSM) のセッションマネージャーを利用するための権限を付与
- **Elastic IP:** EC2インスタンスに固定のパブリックIPを割り当て

## 特徴と学習ポイント

### 1. セキュアなアクセス (Secure Access)
SSHポート(22番)は意図的に開放せず、**AWS Systems Managerのセッションマネージャー**を利用してインスタンスに接続する構成にしています。これにより、インターネットからのブルートフォース攻撃などのリスクを根本的に排除し、IAMに基づいた安全なアクセスを実現しています。

### 2. Infrastructure as Code (IaC)
AWS CloudFormationを利用して、インフラ構成をコードで管理しています。手動でのコンソール操作を排除することで、ヒューマンエラーを防ぎ、誰でも何度でも全く同じ環境を迅速に再現できることを目指しました。テンプレートはGitでバージョン管理します。

### 3. コスト意識 (Cost Awareness)
インスタンスタイプに `t3.micro` を選択するなど、すべてのリソースをAWSの無料利用枠の範囲内で完結できるように設計しています。

## 実行方法

1.  このリポジトリをローカルにクローンまたはダウンロードします。
2.  AWSマネジメントコンソールにログインし、CloudFormationのサービスページへ移動します。
3.  「スタックの作成」から「新しいリソースを使用 (標準)」を選択します。
4.  「既存のテンプレートを選択」を選び、「テンプレートファイルのアップロード」から、このディレクトリにある `handson3-secure-template.yaml` ファイルを選択します。
5.  スタック名（例: `my-secure-web-stack`）を入力し、画面の指示に従って進みます。
6.  「AWS CloudFormation によって IAM リソースが作成される場合があることを承認します。」にチェックを入れ、最後に「送信」でスタックを作成します。
7.  ステータスが `CREATE_COMPLETE` になれば、構築完了です。「出力」タブに表示されるURLからWebサーバにアクセスできます。

## クリーンアップ

作成したリソースをすべて削除するには、CloudFormationのコンソールから作成したスタックを選択し、「削除」を実行してください。
